{% extends "base.html" %}

{% block content %}
<div class="students-page">
    <h2>–£—á–µ–Ω–∏–∫–∏ –∫–ª–∞—Å—Å–∞ {{ school_class.grade }}{{ school_class.name }}</h2>
    
    <div class="class-info">
        <p><strong>–ö–ª–∞—Å—Å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å:</strong> 
            {% if school_class.class_teacher %}
                {{ school_class.class_teacher.username }}
            {% else %}
                <span class="text-muted">–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</span>
            {% endif %}
        </p>
        <p><strong>–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∫–ª–∞—Å—Å–∞:</strong> {{ school_class.total_rating }}</p>
    </div>

    <div class="students-list">
        <h3>–°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤</h3>
        {% if school_class.students %}
        <table>
            <thead>
                <tr>
                    <th>–§–ò–û</th>
                    <th>–õ–æ–≥–∏–Ω</th>
                    <th>–õ–∏—á–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥</th>
                    <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for student in school_class.students %}
                <tr>
                    <td>{{ student.full_name }}</td>
                    <td>{{ student.login }}</td>
                    <td>{{ student.personal_rating }}</td>
                    <td>{{ student.created_at.strftime('%d.%m.%Y') }}</td>
                    <td>
                        <a href="{{ url_for('student_portfolio', student_id=student.id) }}" class="btn-small">
                            –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>–í —ç—Ç–æ–º –∫–ª–∞—Å—Å–µ –ø–æ–∫–∞ –Ω–µ—Ç —É—á–µ–Ω–∏–∫–æ–≤.</p>
        {% endif %}
    </div>

<div class="actions">
    <a href="{{ url_for('add_class_points', class_id=school_class.id) }}" class="btn btn-success">üéØ –ù–∞—á–∏—Å–ª–∏—Ç—å –±–∞–ª–ª—ã</a>
    <a href="{{ url_for('class_points_history', class_id=school_class.id) }}" class="btn">üìä –ò—Å—Ç–æ—Ä–∏—è –±–∞–ª–ª–æ–≤</a>
    <a href="{{ url_for('export_student_logins', class_id=school_class.id) }}" class="btn">üì§ –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–∏–Ω–æ–≤</a>
    <a href="{{ url_for('classes') }}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–ª–∞—Å—Å–∞–º</a>
</div>
</div>
{% endblock %}