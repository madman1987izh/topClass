{% extends "base.html" %}

{% block content %}
<div class="dashboard">
    <h2>ğŸ‰ Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ, {{ current_user.username if current_user.role else current_user.full_name }}!</h2>

    {% if current_user.role %}
    <div class="stats">
        <div class="card stat-card">
            <h3>ğŸ† ĞĞ±Ñ‰Ğ¸Ğ¹ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ ÑˆĞºĞ¾Ğ»Ñ‹</h3>
            <p class="stat-number">{{ total_school_rating }}</p>
            <p>Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ²</p>
        </div>
        <div class="card stat-card">
            <h3>ğŸ‘¨â€ğŸ“ ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºĞ»Ğ°ÑÑĞ¾Ğ²</h3>
            <p class="stat-number">{{ classes_count }}</p>
            <p>ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´</p>
        </div>
        <div class="card stat-card">
            <h3>ğŸ¯ ĞœĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ</h3>
            <p class="stat-number">{{ events_count }}</p>
            <p>ÑĞ¾Ñ€ĞµĞ²Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹</p>
        </div>
        <div class="card stat-card">
            <h3>ğŸŒŸ Ğ£Ñ‡Ğ°Ñ‰Ğ¸ĞµÑÑ</h3>
            <p class="stat-number">{{ students_count }}</p>
            <p>Ñ‡ĞµĞ¼Ğ¿Ğ¸Ğ¾Ğ½Ğ¾Ğ²</p>
        </div>
    </div>

    <div class="card quick-actions">
        <h3>âš¡ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ</h3>
        <div class="action-buttons">
            <a href="{{ url_for('classes') }}" class="btn">ğŸ‘¨â€ğŸ« Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ»Ğ°ÑÑĞ°Ğ¼Ğ¸</a>
            <a href="{{ url_for('events') }}" class="btn">ğŸ¯ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ</a>
            <a href="{{ url_for('ratings') }}" class="btn">ğŸ“Š ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¸</a>
            <a href="{{ url_for('reports') }}" class="btn">ğŸ“ˆ Ğ¡Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ñ‡ĞµÑ‚</a>
        </div>
    </div>
    {% else %}
    <div class="stats">
        <div class="card stat-card">
            <h3>ğŸŒŸ ĞœĞ¾Ğ¹ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³</h3>
            <p class="stat-number">{{ current_user.personal_rating }}</p>
            <p>Ğ±Ğ°Ğ»Ğ»Ğ¾Ğ²</p>
        </div>
        <div class="card stat-card">
            <h3>ğŸ¯ Ğ£Ñ‡Ğ°ÑÑ‚Ğ¸Ğ¹</h3>
            <p class="stat-number">{{ current_user.participations|selectattr("approved")|list|length }}</p>
            <p>Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğ¹</p>
        </div>
    </div>

    <div class="card quick-actions">
        <h3>ğŸ¯ ĞœĞ¾Ğ¸ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸</h3>
        <div class="action-buttons">
            <a href="{{ url_for('student_portfolio', student_id=current_user.id) }}" class="btn">ğŸ“ ĞœĞ¾Ğµ Ğ¿Ğ¾Ñ€Ñ‚Ñ„Ğ¾Ğ»Ğ¸Ğ¾</a>
            <a href="{{ url_for('events') }}" class="btn">ğŸ† Ğ£Ñ‡Ğ°ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ¼ĞµÑ€Ğ¾Ğ¿Ñ€Ğ¸ÑÑ‚Ğ¸ÑÑ…</a>
            <a href="{{ url_for('ratings') }}" class="btn">ğŸ¥‡ ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¸</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}